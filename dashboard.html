<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Incidencias</title>
    <style>
        /* Estilos mínimos */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 10px;
            border-radius: 5px;
        }
        
        .logo {
            width: 60px;
            margin-right: 15px;
        }
        
        button {
            padding: 10px 15px;
            margin-right: 10px;
            background-color: #2C8B89;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .container {
            background: white;
            padding: 20px;
            border-radius: 5px;
        }
        
        /* Estilos para el modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            width: 80%;
            max-width: 500px;
            border-radius: 5px;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        textarea {
            height: 100px;
        }
    </style>
</head>
<body>
    <header>
        <img src="logo.png" alt="Logo" class="logo">
        <h1>REGISTRO DE INCIDENCIAS</h1>
    </header>
    
    <div>
        <button id="refreshBtn">Actualizar</button>
        <button id="createBtn">Crear Incidencia</button>
    </div>
    
    <div class="container" id="content">
        <p>No hay incidencias para mostrar. Pulse "Actualizar" para ver las incidencias o "Crear Incidencia" para añadir una nueva.</p>
    </div>
    
    <!-- Modal para crear incidencia -->
    <div id="incidenciaModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Nueva Incidencia</h2>
            
            <form id="incidenciaForm">
                <div class="form-group">
                    <label for="fecha">Fecha y Hora:</label>
                    <input type="text" id="fecha" readonly>
                </div>
                
                <div class="form-group">
                    <label for="ciudadano">Ciudadano:</label>
                    <input type="text" id="ciudadano" value="admin" readonly>
                </div>
                
                <div class="form-group">
                    <label for="titulo">Título de la Incidencia*:</label>
                    <input type="text" id="titulo" placeholder="Título breve" required>
                </div>
                
                <div class="form-group">
                    <label for="descripcion">Descripción*:</label>
                    <textarea id="descripcion" placeholder="Describa el problema" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="categoria">Categoría*:</label>
                    <select id="categoria" required>
                        <option value="" disabled selected>Seleccione categoría</option>
                        <option value="Mobiliario urbano">Mobiliario urbano</option>
                        <option value="Alumbrado">Alumbrado</option>
                        <option value="Aceras y calzadas">Aceras y calzadas</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="ubicacion">Ubicación*:</label>
                    <input type="text" id="ubicacion" placeholder="Dirección o ubicación" required>
                </div>
                
                <div class="form-group">
                    <label for="fotos">Fotografías:</label>
                    <input type="file" id="fotos" multiple accept="image/*">
                </div>
                
                <button type="submit">Enviar Incidencia</button>
                <button type="button" id="cancelarBtn">Cancelar</button>
            </form>
        </div>
    </div>
    
    <script>
        // Obtener elementos del DOM
        const modal = document.getElementById("incidenciaModal");
        const createBtn = document.getElementById("createBtn");
        const closeSpan = document.getElementsByClassName("close")[0];
        const cancelarBtn = document.getElementById("cancelarBtn");
        const refreshBtn = document.getElementById("refreshBtn");
        const form = document.getElementById("incidenciaForm");
        
        // Al hacer clic en el botón de Crear Incidencia
        createBtn.onclick = function() {
            // Establecer fecha actual
            const now = new Date();
            document.getElementById('fecha').value = now.toLocaleString('es-ES');
            
            // Mostrar el modal
            modal.style.display = "block";
        }
        
        // Al hacer clic en la X para cerrar
        closeSpan.onclick = function() {
            modal.style.display = "none";
        }
        
        // Al hacer clic en el botón Cancelar
        cancelarBtn.onclick = function() {
            modal.style.display = "none";
        }
        
        // Al hacer clic fuera del modal
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        
        // Al enviar el formulario
        form.onsubmit = function(event) {
            event.preventDefault();
            
            const titulo = document.getElementById("titulo").value;
            const descripcion = document.getElementById("descripcion").value;
            const categoria = document.getElementById("categoria").value;
            const ubicacion = document.getElementById("ubicacion").value;
            
            if (!titulo || !descripcion || !categoria || !ubicacion) {
                alert("Por favor, complete todos los campos obligatorios.");
                return;
            }
            
            // Simular creación exitosa
            alert("Incidencia creada con éxito");
            modal.style.display = "none";
            
            // Mostrar en el contenido
            document.getElementById("content").innerHTML = `
                <h3>Incidencia creada</h3>
                <p><strong>Título:</strong> ${titulo}</p>
                <p><strong>Categoría:</strong> ${categoria}</p>
                <p><strong>Ubicación:</strong> ${ubicacion}</p>
                <p><strong>Descripción:</strong> ${descripcion}</p>
            `;
        }
        
        // Botón de actualizar
        refreshBtn.onclick = function() {
            document.getElementById("content").innerHTML = `
                <table border="1" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Título</th>
                            <th>Categoría</th>
                            <th>Ubicación</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Banco roto en Plaza Mayor</td>
                            <td>Mobiliario urbano</td>
                            <td>Plaza Mayor</td>
                            <td>Pendiente</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Farola sin luz</td>
                            <td>Alumbrado</td>
                            <td>Calle San Juan, 23</td>
                            <td>En revisión</td>
                        </tr>
                    </tbody>
                </table>
            `;
        }
    </script>
</body>
</html>
